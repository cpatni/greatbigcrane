{% extends 'sidebar.html' %}
{% load buildout_config %}

{% block contenttitle %}{{project.name}}{% endblock %}

{% block main %}
<p>{{project.git_repo}}</p>
<p>{{project.base_directory}}</p>
<p>{{project.description}}</p>

<section>
  <h2>Buildout Sections</h2>
  {% for name, section in project.buildout_sections %}
  <ul>
    <li><h3>{{name}}</h3>(<a href="{% url edit_recipe project.id name %}">Edit Recipe</a>)
    {% for key, value in section.items %}
    <ul>
      {{key}} = {{value|configvalue}}
    </ul>
    {% endfor %}
    </li>
  </ul>
  {% endfor %}
  <a href="{% url add_recipe project.id %}">Add Recipe</a>
</section>
{% endblock %}

{% block sidebar %}
  <div class="project">
  <section>
    <h2>Actions</h2>
    <div class="actions clearfix">
      <a class="delete" href="{% url delete_project project.id %}">Delete Project</a>
      <a class="buildout" href="{% url schedule_buildout project.id %}">Buildout</a>
      <a class="tests" href="{% url schedule_test project.id %}">Test</a>
      {% if project.git_repo %}
        <a class="pull" href="{% url schedule_pull project.id %}">Git Pull</a>
      {% endif %}
      {% if project.is_django %}
        <a class="sync" href="{% url schedule_syncdb project.id %}">Syncdb</a>
      {# Ideally this would only show up if we knew south was installed #}
        <a class="migrate" href="{% url schedule_migrate project.id %}">Migrate</a>
      {% endif %}
    </div>
  </section>
  <section>
    <h2>Notifications</h2>
    <ul class="tests">
      {% for notification in notifications %}
        {% include 'notifications/_notification.html' %}
      {% endfor %}
    </ul>
  </section>
</div>
{% endblock %}
