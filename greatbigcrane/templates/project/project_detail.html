{% extends 'sidebar.html' %}
{% load buildout_config %}

{% block contenttitle %}{{project.name}}{% endblock %}

{% block main %}
  <div id="project-{{project.id}}" class="project">
    <p>{{project.git_repo}}</p>
    <p>{{project.base_directory}}</p>
    <p>{{project.description}}</p>

    <section>
      <h2>Buildout Sections</h2>
      {% for name, section in project.buildout_sections %}
      <ul>
        <li><h3>{{name}}</h3>(<a href="{% url edit_recipe project.id name %}">Edit Recipe</a>)
        {% for key, value in section.items %}
        <ul>
          {{key}} = {{value|configvalue}}
        </ul>
        {% endfor %}
        </li>
      </ul>
      {% endfor %}
      <a href="{% url add_recipe project.id %}">Add Recipe</a>
    </section>
  </div>
{% endblock %}

{% block sidebar %}
  <div class="project">
  <section>
    <h2>Actions</h2>
    <div class="actions clearfix">
      <a class="edit" href="{% url edit_project project.id %}" title="Edit Project">Edit Project</a>
      <a class="delete confirm" href="{% url delete_project project.id %}" title="Delete Project">Delete Project</a>
      <a class="buildout ajax" href="{% url schedule_buildout project.id %}" title="Run Buildout">Buildout</a>
      <a class="tests ajax" href="{% url schedule_test project.id %}" title="Run Tests">Test</a>
      {% if project.git_repo %}
        <a class="pull ajax" href="{% url schedule_pull project.id %}" title="Git Pull">Git Pull</a>
      {% endif %}
      {% if project.is_django %}
        <a class="syncdb ajax" href="{% url schedule_syncdb project.id %}" title="SyncDB">Syncdb</a>
      {# Ideally this would only show up if we knew south was installed #}
        <a class="migrate ajax" href="{% url schedule_migrate project.id %}" title="Migrate">Migrate</a>
      {% endif %}
      {% if project.github_url %}
        <a class="github" href="{{project.github_url}}" title="View on Github">View on Github</a>
      {% endif %}
    </div>
  </section>
  <section>
    <h2>Notifications</h2>
    <ul class="tests">
      {% for notification in notifications %}
        {% include 'notifications/_notification.html' %}
      {% endfor %}
    </ul>
  </section>
</div>
{% endblock %}
